---
phase: 01-layout-typography-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tailwind.config.js
  - layouts/_default/baseof.html
autonomous: true

must_haves:
  truths:
    - "Prose content has 65ch max-width for optimal reading"
    - "Footer stays at viewport bottom on short content pages"
    - "Content area is centered with proper horizontal padding"
    - "Fluid font sizes scale smoothly between mobile and desktop"
  artifacts:
    - path: "tailwind.config.js"
      provides: "Typography 65ch max-width, fluid fontSize utilities"
      contains: "maxWidth: '65ch'"
    - path: "layouts/_default/baseof.html"
      provides: "Flexbox sticky footer layout"
      contains: "flex flex-col min-h-screen"
  key_links:
    - from: "layouts/_default/baseof.html"
      to: "layouts/partials/footer.html"
      via: "flexbox flex-1 on main pushes footer down"
      pattern: "flex-1"
    - from: "tailwind.config.js"
      to: "layouts/_default/single.html"
      via: "prose class applies 65ch max-width"
      pattern: "prose"
---

<objective>
Configure Tailwind typography for optimal line length and add fluid font sizing, plus fix sticky footer layout structure.

Purpose: Establish readable content width (50-75 chars) and ensure footer stays at viewport bottom on short pages. These are foundational layout requirements that affect all pages.

Output: Updated tailwind.config.js with 65ch prose width and fluid fontSize utilities; baseof.html with flexbox sticky footer pattern.
</objective>

<execution_context>
@/home/dan/.claude/get-shit-done/workflows/execute-plan.md
@/home/dan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-layout-typography-foundation/01-RESEARCH.md

Source files to modify:
@tailwind.config.js
@layouts/_default/baseof.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure Tailwind typography and fluid font sizes</name>
  <files>tailwind.config.js</files>
  <action>
Update tailwind.config.js:

1. Change typography plugin maxWidth from 'none' to '65ch' (optimal line length for readability):
```javascript
typography: (theme) => ({
  DEFAULT: {
    css: {
      maxWidth: '65ch',  // Changed from 'none'
      // ... keep existing code/pre styling
    },
  },
  // ... keep invert config
}),
```

2. Add fluid fontSize utilities using CSS clamp() for viewport-responsive scaling:
```javascript
fontSize: {
  'fluid-sm': 'clamp(0.875rem, 0.75rem + 0.5vw, 1rem)',
  'fluid-base': 'clamp(1rem, 0.875rem + 0.5vw, 1.125rem)',
  'fluid-lg': 'clamp(1.125rem, 1rem + 0.5vw, 1.5rem)',
  'fluid-xl': 'clamp(1.5rem, 1.25rem + 1vw, 2.5rem)',
  'fluid-2xl': 'clamp(2rem, 1.5rem + 2vw, 4rem)',
},
```

Keep all existing config (fontFamily, darkMode, content, plugins).
  </action>
  <verify>Run `npm run build` - should complete without errors. Grep tailwind.config.js for "65ch" and "fluid-" to confirm changes applied.</verify>
  <done>tailwind.config.js contains maxWidth: '65ch' in typography DEFAULT config and 5 fluid-* fontSize utilities.</done>
</task>

<task type="auto">
  <name>Task 2: Implement sticky footer with flexbox layout</name>
  <files>layouts/_default/baseof.html</files>
  <action>
Update baseof.html body element to use flexbox sticky footer pattern:

1. Add `flex flex-col` to body class (keeps min-h-screen, bg, text, transition classes)
2. Add `flex-1` to main element to push footer to bottom

Current body:
```html
<body class="min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">
```

Updated body:
```html
<body class="flex flex-col min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">
```

Current main:
```html
<main class="max-w-3xl mx-auto px-4 sm:px-6 py-8">
```

Updated main (add flex-1, keep existing classes):
```html
<main class="flex-1 max-w-3xl mx-auto px-4 sm:px-6 py-8">
```

Do NOT modify the partial includes or block structure - only update the class attributes.
  </action>
  <verify>Run `npm run dev` and visit a short content page (e.g., /about/). Footer should be at viewport bottom, not floating mid-page.</verify>
  <done>baseof.html body has "flex flex-col min-h-screen" and main has "flex-1" class. Footer stays at bottom on short pages.</done>
</task>

<task type="auto">
  <name>Task 3: Update single.html to use 65ch width correctly</name>
  <files>layouts/_default/single.html</files>
  <action>
The single.html template currently has `max-w-none` on the prose div, which would override the typography plugin's 65ch setting.

Find this line:
```html
<div class="prose prose-lg dark:prose-invert max-w-none">
```

Remove `max-w-none` to let the typography plugin's 65ch apply:
```html
<div class="prose prose-lg dark:prose-invert">
```

Also add `mx-auto` to center the prose block within the main container:
```html
<div class="prose prose-lg dark:prose-invert mx-auto">
```

The parent `<main>` is already max-w-3xl (48rem = 768px), so prose content will be centered within it at 65ch (~715px at 1.1rem base).
  </action>
  <verify>Run `npm run dev`, visit a blog post. Content should be narrower than header, centered, with comfortable line length (~50-75 characters per line).</verify>
  <done>single.html prose div no longer has max-w-none, uses mx-auto for centering. Lines are readable length.</done>
</task>

</tasks>

<verification>
After all tasks:
1. `npm run build` completes without errors
2. `grep -n "65ch" tailwind.config.js` shows the maxWidth setting
3. `grep -n "fluid-" tailwind.config.js` shows all 5 fluid fontSize utilities
4. `grep -n "flex flex-col" layouts/_default/baseof.html` confirms sticky footer
5. `grep -n "flex-1" layouts/_default/baseof.html` confirms main has flex-1
6. `grep -n "max-w-none" layouts/_default/single.html` returns no results
</verification>

<success_criteria>
- Typography plugin uses 65ch max-width (LAYOUT-01, LAYOUT-03)
- 5 fluid fontSize utilities available: fluid-sm, fluid-base, fluid-lg, fluid-xl, fluid-2xl (LAYOUT-06)
- Footer stays at viewport bottom on short content pages (LAYOUT-02)
- Prose content is centered and readable
- Build completes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-layout-typography-foundation/01-01-SUMMARY.md`
</output>
